import{callFunctionOnPath as g}from"./action-actions.js";class o{static async perform(a,r,e,t){await this[a.action]?.(a,r,e,t)}static async call_on_element(a,r,e,t){const n=await crs.dom.get_element(a.args.element,r,e,t),s=await g(n,a,r,e,t);return a.args.target!=null&&await crs.process.setValue(a.args.target,s,r,e,t),s}static async get_property(a,r,e,t){const n=await crs.dom.get_element(a,r,e,t),s=await crs.binding.utils.getValueOnPath(n,a.args.property);return a.args.target!=null&&await crs.process.setValue(a.args.target,s,r,e,t),s}static async set_properties(a,r,e,t){const n=await crs.dom.get_element(a,r,e,t),s=await crs.process.getValue(a.args.properties,r,e,t),i=Object.keys(s);for(let l of i)n[l]=await crs.process.getValue(s[l],r,e,t)}static async open_tab(a,r,e,t){const n=await crs.process.getValue(a.args.prefix_http,r,e,t)||!1;let s=await crs.call("string","inflate",{template:a.args.url,parameters:a.args.parameters},r,e,t);n===!0&&s.indexOf("://")===-1&&(s=`http://${s}`),window.open(s,"_blank")}static async get_element_bounds(a,r,e,t){const s=(await crs.dom.get_element(a.args.element,r,e,t)).getBoundingClientRect();return a.args.target!=null&&await crs.process.setValue(a.args.target,s,r,e,t),s}static async find_parent_of_type(a,r,e,t){const n=await crs.dom.get_element(a.args.element,r,e,t),s=await crs.process.getValue(a.args.stopAtNodeName,r,e,t),i=await crs.process.getValue(a.args.stopAtNodeQuery||a.args.stop_query,r,e,t),l=await crs.process.getValue(a.args.nodeName,r,e,t),u=await crs.process.getValue(a.args.nodeQuery||a.args.query,r,e,t);if(n==null||l==null&&u==null)return;const c=await this.#a(n,l,u,s,i);return a.args.target!=null&&await crs.process.setValue(a.args.target,c,r,e,t),c}static async#a(a,r,e,t,n){const s=r!=null||t!=null?a.nodeName.toLowerCase():null;if(!(t!=null&&s===t)&&!(n!=null&&a.matches(n))){if(r!=null&&s===r.toLowerCase()||e!=null&&a.matches(e))return a;if(a.parentElement!=null)return await this.#a(a.parentElement,r,e,t,n)}}}crs.intent.dom_utils=o;export{o as DomUtilsActions};
